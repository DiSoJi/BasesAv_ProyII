"use strict";

var ceil = Math.ceil,
    random = Math.random;


var BITS_PER_BYTE = 8;

var endianByteNum = function () {
  var buf32 = new Uint32Array(1);
  var buf8 = new Uint8Array(buf32.buffer);
  buf32[0] = 0xff;
  return buf8[0] === 0xff ? [2, 3, 4, 5, 6, 7] : [0, 1, 2, 3, 6, 7];
}();

var prngBytes = function prngBytes(count) {
  var BYTES_USED_PER_RANDOM_CALL = 6;
  var randCount = ceil(count / BYTES_USED_PER_RANDOM_CALL);

  var buffer = new ArrayBuffer(count);
  var dataView = new DataView(new ArrayBuffer(BITS_PER_BYTE));
  for (var rNum = 0; rNum < randCount; rNum += 1) {
    dataView.setFloat64(0, random());
    for (var n = 0; n < BYTES_USED_PER_RANDOM_CALL; n += 1) {
      var fByteNum = endianByteNum[n];
      var bByteNum = rNum * BYTES_USED_PER_RANDOM_CALL + n;
      if (bByteNum < count) {
        buffer[bByteNum] = dataView.getUint8(fByteNum);
      }
    }
  }
  return buffer;
};

module.exports = {
  prngBytes: prngBytes
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9wcm5nLWJ5dGVzLmpzIl0sIm5hbWVzIjpbImNlaWwiLCJNYXRoIiwicmFuZG9tIiwiQklUU19QRVJfQllURSIsImVuZGlhbkJ5dGVOdW0iLCJidWYzMiIsIlVpbnQzMkFycmF5IiwiYnVmOCIsIlVpbnQ4QXJyYXkiLCJidWZmZXIiLCJwcm5nQnl0ZXMiLCJjb3VudCIsIkJZVEVTX1VTRURfUEVSX1JBTkRPTV9DQUxMIiwicmFuZENvdW50IiwiQXJyYXlCdWZmZXIiLCJkYXRhVmlldyIsIkRhdGFWaWV3Iiwick51bSIsInNldEZsb2F0NjQiLCJuIiwiZkJ5dGVOdW0iLCJiQnl0ZU51bSIsImdldFVpbnQ4IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7SUFBUUEsSSxHQUFpQkMsSSxDQUFqQkQsSTtJQUFNRSxNLEdBQVdELEksQ0FBWEMsTTs7O0FBRWQsSUFBTUMsZ0JBQWdCLENBQXRCOztBQUVBLElBQU1DLGdCQUFpQixZQUFNO0FBQzNCLE1BQU1DLFFBQVEsSUFBSUMsV0FBSixDQUFnQixDQUFoQixDQUFkO0FBQ0EsTUFBTUMsT0FBTyxJQUFJQyxVQUFKLENBQWVILE1BQU1JLE1BQXJCLENBQWI7QUFDQUosUUFBTSxDQUFOLElBQVcsSUFBWDtBQUNBLFNBQVFFLEtBQUssQ0FBTCxNQUFZLElBQWIsR0FBcUIsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQixDQUFoQixDQUFyQixHQUEwQyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLENBQWhCLENBQWpEO0FBQ0QsQ0FMcUIsRUFBdEI7O0FBT0EsSUFBTUcsWUFBWSxTQUFaQSxTQUFZLENBQUNDLEtBQUQsRUFBVztBQUMzQixNQUFNQyw2QkFBNkIsQ0FBbkM7QUFDQSxNQUFNQyxZQUFZYixLQUFLVyxRQUFRQywwQkFBYixDQUFsQjs7QUFFQSxNQUFNSCxTQUFTLElBQUlLLFdBQUosQ0FBZ0JILEtBQWhCLENBQWY7QUFDQSxNQUFNSSxXQUFXLElBQUlDLFFBQUosQ0FBYSxJQUFJRixXQUFKLENBQWdCWCxhQUFoQixDQUFiLENBQWpCO0FBQ0EsT0FBSyxJQUFJYyxPQUFPLENBQWhCLEVBQW1CQSxPQUFPSixTQUExQixFQUFxQ0ksUUFBUSxDQUE3QyxFQUFnRDtBQUM5Q0YsYUFBU0csVUFBVCxDQUFvQixDQUFwQixFQUF1QmhCLFFBQXZCO0FBQ0EsU0FBSyxJQUFJaUIsSUFBSSxDQUFiLEVBQWdCQSxJQUFJUCwwQkFBcEIsRUFBZ0RPLEtBQUssQ0FBckQsRUFBd0Q7QUFDdEQsVUFBTUMsV0FBV2hCLGNBQWNlLENBQWQsQ0FBakI7QUFDQSxVQUFNRSxXQUFZSixPQUFPTCwwQkFBUixHQUFzQ08sQ0FBdkQ7QUFDQSxVQUFJRSxXQUFXVixLQUFmLEVBQXNCO0FBQ3BCRixlQUFPWSxRQUFQLElBQW1CTixTQUFTTyxRQUFULENBQWtCRixRQUFsQixDQUFuQjtBQUNEO0FBQ0Y7QUFDRjtBQUNELFNBQU9YLE1BQVA7QUFDRCxDQWpCRDs7QUFtQkFjLE9BQU9DLE9BQVAsR0FBaUI7QUFDZmQ7QUFEZSxDQUFqQiIsImZpbGUiOiJwcm5nLWJ5dGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBjZWlsLCByYW5kb20gfSA9IE1hdGhcblxuY29uc3QgQklUU19QRVJfQllURSA9IDhcblxuY29uc3QgZW5kaWFuQnl0ZU51bSA9ICgoKSA9PiB7XG4gIGNvbnN0IGJ1ZjMyID0gbmV3IFVpbnQzMkFycmF5KDEpXG4gIGNvbnN0IGJ1ZjggPSBuZXcgVWludDhBcnJheShidWYzMi5idWZmZXIpXG4gIGJ1ZjMyWzBdID0gMHhmZlxuICByZXR1cm4gKGJ1ZjhbMF0gPT09IDB4ZmYpID8gWzIsIDMsIDQsIDUsIDYsIDddIDogWzAsIDEsIDIsIDMsIDYsIDddXG59KSgpXG5cbmNvbnN0IHBybmdCeXRlcyA9IChjb3VudCkgPT4ge1xuICBjb25zdCBCWVRFU19VU0VEX1BFUl9SQU5ET01fQ0FMTCA9IDZcbiAgY29uc3QgcmFuZENvdW50ID0gY2VpbChjb3VudCAvIEJZVEVTX1VTRURfUEVSX1JBTkRPTV9DQUxMKVxuXG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjb3VudClcbiAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKEJJVFNfUEVSX0JZVEUpKVxuICBmb3IgKGxldCByTnVtID0gMDsgck51bSA8IHJhbmRDb3VudDsgck51bSArPSAxKSB7XG4gICAgZGF0YVZpZXcuc2V0RmxvYXQ2NCgwLCByYW5kb20oKSlcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IEJZVEVTX1VTRURfUEVSX1JBTkRPTV9DQUxMOyBuICs9IDEpIHtcbiAgICAgIGNvbnN0IGZCeXRlTnVtID0gZW5kaWFuQnl0ZU51bVtuXVxuICAgICAgY29uc3QgYkJ5dGVOdW0gPSAock51bSAqIEJZVEVTX1VTRURfUEVSX1JBTkRPTV9DQUxMKSArIG5cbiAgICAgIGlmIChiQnl0ZU51bSA8IGNvdW50KSB7XG4gICAgICAgIGJ1ZmZlcltiQnl0ZU51bV0gPSBkYXRhVmlldy5nZXRVaW50OChmQnl0ZU51bSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcHJuZ0J5dGVzXG59XG4iXX0=